

<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

  <title>Preference center</title>
</head>
  
  <body >
    




  <header class="text-center bg-dark text-white h-25">
    lorem ipsum
  </header>
  <section class="text-center  d-flex flex-column align-items-center justify-content-center">



%%[
SET @subscriberkey= _subscriberkey

IF NOT EMPTY(@subscriberkey) THEN

SET @subscriberId =lookup("_subscribers", "SubscriberId", "SubscriberKey", @subscriberkey)


if not Empty(@subscriberId)  then

set @subscriberRows=LookupRows("_EnterpriseAttribute","_SubscriberID",@subscriberId)
set @prefcenterRows=LookupRows("prefcenter","subscriberkey", @subscriberkey)
if RowCount(@subscriberRows) ==1 and RowCount(@prefcenterRows) ==1 then


set @subscriberRow=Row(@subscriberRows,1)
set @firstName=Field(@subscriberRow, "first name", 0) 
set @lastName=Field(@subscriberRow, "last name", 0) 
set @email=Field(@subscriberRow, "email", 0) 

set @prefcenterRow=Row(@prefcenterRows,1)
set @hasOptedOut=Field(@prefcenterRow, "hasOptedOut", 0) 
set @newsletter=Field(@prefcenterRow, "newsletter", 0) 
set @events=Field(@prefcenterRow, "events", 0) 
set @offers=Field(@prefcenterRow, "offers", 0) 

set @newsletterChk=""
set @eventsChk=""
set @offersChk=""

  IF @Newsletter == true THEN SET @Newsletterchk = "checked" ENDIF
  IF @Events == true THEN SET @Eventschk = "checked" ENDIF
  IF @Offers == true THEN SET @Offerschk = "checked" ENDIF
endif
 ]%%
  <div>%%=v(@subscriberId)=%%</div>
  <div>%%=v(@firstName)=%%</div>
   <div>%%=v(@lastName)=%%</div>
   <div>%%=v(@email)=%%</div>
     <div>%%=v(@hasOptedOut)=%%</div>
   <div>%%=v(@newsletter)=%%</div>
   <div>%%=v(@events)=%%</div>
   <div>%%=v(@offers)=%%</div>

   
    <form class=" border border-dark rounded bg-light p-1 p-md-3 m-1 m-md-5 col col-11 col-md-6 text-center">
      <div class="form-group col col-12 col-md-6 m-auto"> <label class ="float-left">First name: </label><br>
        <input class ="w-100" type="text" name="firstname" value="%%=v(@FirstName)=%%">
      </div>
      <div class="form-group">
        <label>Last name: </label>
        <br><input type="text" name="lastname" value="%%=v(@LastName)=%%">
      </div>
      <div class="form-group"> <label>Email: </label><br><input type="text" name="email" value="%%=v(@Email)=%%"></div>

      <div class="form-check">
      <label>Newsletter: </label><input name="newsletter" type="checkbox" %%=v(@Newsletterchk)=%%><br>
      <label>Events: </label><input name="events" type="checkbox" %%=v(@Eventschk)=%%><br>
      <label>Offers: </label><input name="offers" type="checkbox" %%=v(@Offerschk)=%%><br>
      </div>
      <input name="submitted" type="hidden" value="true">
      <input type="submit" value="Submit" class=" btn-dark rounded align-self-center">
    </form>
    

   
%%[ELSE]%%

Sorry, something went wrong (no records found).

%%[ENDIF ELSE]%%

Sorry, something went wrong (missing subscriber key).
  
    
%%[ENDIF]%% 

    
    
  </section>


  <footer class="text-center bg-dark text-white h-25">
    <div>
      Â©mm
    </div>
  </footer>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>

    
      </body>



</html>


